<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ - –î–∏—Å–ø–µ—Ç—á–µ—Ä –û–±—â–µ–∂–∏—Ç–∏—è</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }
        body {
            background-color: #f0f2f5;
            color: #333;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .controls {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
            align-items: end;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        label {
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #2c3e50;
            font-size: 0.9rem;
        }
        input, select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
        }
        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        .btn-primary:hover {
            background-color: #2980b9;
        }
        .btn-secondary {
            background-color: #95a5a6;
            color: white;
        }
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        .stats {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            display: flex;
            gap: 2rem;
        }
        .stat-item {
            text-align: center;
        }
        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #2c3e50;
            color: white;
            cursor: pointer;
            position: relative;
        }
        th:hover {
            background-color: #34495e;
        }
        th::after {
            content: '‚Üï';
            position: absolute;
            right: 10px;
            opacity: 0.5;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
        .room-cell {
            font-weight: bold;
            color: #2c3e50;
        }
        .actions {
            display: flex;
            gap: 0.5rem;
        }
        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
        }
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }
        .page-btn {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 4px;
        }
        .page-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            üìã –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
            <button class="btn btn-primary" onclick="location.href='import-students.html'">
                üì• –ò–º–ø–æ—Ä—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
            </button>
        </h1>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalStudents">0</div>
                <div>–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalFloors">0</div>
                <div>–≠—Ç–∞–∂–µ–π –∑–∞–Ω—è—Ç–æ</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalRooms">0</div>
                <div>–ö–æ–º–Ω–∞—Ç –∑–∞–Ω—è—Ç–æ</div>
            </div>
        </div>

        <div class="controls">
            <div class="form-group">
                <label>–ü–æ–∏—Å–∫ –ø–æ –§–ò–û –∏–ª–∏ –≥—Ä—É–ø–ø–µ</label>
                <input type="text" id="searchInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ –≥—Ä—É–ø–ø—É..." oninput="filterStudents()">
            </div>
            <div class="form-group">
                <label>–≠—Ç–∞–∂</label>
                <select id="floorFilter" onchange="filterStudents()">
                    <option value="">–í—Å–µ —ç—Ç–∞–∂–∏</option>
                    <option value="2">2 —ç—Ç–∞–∂</option>
                    <option value="3">3 —ç—Ç–∞–∂</option>
                    <option value="5">5 —ç—Ç–∞–∂</option>
                </select>
            </div>
            <div class="form-group">
                <label>–°–µ–∫—Ü–∏—è</label>
                <select id="sectionFilter" onchange="filterStudents()">
                    <option value="">–í—Å–µ —Å–µ–∫—Ü–∏–∏</option>
                    <option value="1">–°–µ–∫—Ü–∏—è 1</option>
                    <option value="2">–°–µ–∫—Ü–∏—è 2</option>
                </select>
            </div>
            <div class="form-group">
                <label>–ö–æ–º–Ω–∞—Ç–∞</label>
                <input type="text" id="roomFilter" placeholder="–ù–æ–º–µ—Ä –∫–æ–º–Ω–∞—Ç—ã" oninput="filterStudents()">
            </div>
            <div>
                <button class="btn btn-secondary" onclick="clearFilters()">
                    ‚ùå –°–±—Ä–æ—Å–∏—Ç—å
                </button>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th onclick="sortTable(0)">–§–ò–û</th>
                    <th onclick="sortTable(1)">–ö–æ–º–Ω–∞—Ç–∞</th>
                    <th onclick="sortTable(2)">–≠—Ç–∞–∂</th>
                    <th onclick="sortTable(3)">–ì—Ä—É–ø–ø–∞</th>
                    <th onclick="sortTable(4)">–ö—É—Ä—Å</th>
                    <th onclick="sortTable(5)">–¢–µ–ª–µ—Ñ–æ–Ω</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody id="studentsTableBody">
                <!-- –°—é–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤—è—Ç—Å—è —Å—Ç—É–¥–µ–Ω—Ç—ã -->
            </tbody>
        </table>

        <div class="pagination" id="pagination">
            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
        </div>
    </div>

    <script>
        // –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–∏–∑ –∏–º–ø–æ—Ä—Ç–∞)
        const students = [
            {fullName: "–ö—É–¥—Ä—è–≤—Ü–µ–≤–∞ –ï –í25", room: "201–ê", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            {fullName: "–ó–∞–π—Ü–µ–≤–∞ –í –ü14", room: "201–ê", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            {fullName: "–ë–∞–¥–∏–∫–æ–≤–∞ –† –ö14", room: "201–ê", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            {fullName: "–ü–µ—á–µ–Ω—Ü–æ–≤–∞ –°", room: "201–ë", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            {fullName: "–õ—é—á–∏–Ω—à–∞", room: "201–ë", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            {fullName: "–ë–∏—á–∏–Ω–æ–≤–∞ –õ", room: "201–ë", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            {fullName: "–¢–µ–Ω–≥–µ—Ä–µ–∫–æ–≤–∞", room: "201–ë", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            {fullName: "–ë–µ—Ä–≥–µ—Ä –Æ", room: "202–ê", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            {fullName: "–ï–≤—Å—Ç—Ä–∞—Ç–æ–≤–∞ –í –ö13", room: "202–ê", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            {fullName: "–°—ã—Ä–µ–Ω–∫–æ –ê –ö12", room: "202–ë", floor: "2 —ç—Ç–∞–∂", group: "–ù—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å", course: 1, phone: ""},
            // ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö –≤–∞—à–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
        ];

        let currentSort = { column: null, direction: 'asc' };
        const itemsPerPage = 20;
        let currentPage = 1;
        let filteredStudents = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function initPage() {
            filteredStudents = [...students];
            updateStatistics();
            renderTable();
            updatePagination();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStatistics() {
            document.getElementById('totalStudents').textContent = students.length;
            
            const uniqueFloors = new Set(students.map(s => s.floor));
            document.getElementById('totalFloors').textContent = uniqueFloors.size;
            
            const uniqueRooms = new Set(students.map(s => s.room));
            document.getElementById('totalRooms').textContent = uniqueRooms.size;
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
        function filterStudents() {
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            const floorFilter = document.getElementById('floorFilter').value;
            const roomFilter = document.getElementById('roomFilter').value.toLowerCase();

            filteredStudents = students.filter(student => {
                const matchesSearch = student.fullName.toLowerCase().includes(searchText) || 
                                    student.group.toLowerCase().includes(searchText);
                const matchesFloor = !floorFilter || student.floor.includes(floorFilter);
                const matchesRoom = !roomFilter || student.room.toLowerCase().includes(roomFilter);
                
                return matchesSearch && matchesFloor && matchesRoom;
            });

            currentPage = 1;
            renderTable();
            updatePagination();
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        function clearFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('floorFilter').value = '';
            document.getElementById('roomFilter').value = '';
            filterStudents();
        }

        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü—ã
        function sortTable(columnIndex) {
            if (currentSort.column === columnIndex) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = columnIndex;
                currentSort.direction = 'asc';
            }

            filteredStudents.sort((a, b) => {
                let valueA, valueB;
                
                switch(columnIndex) {
                    case 0: valueA = a.fullName; valueB = b.fullName; break;
                    case 1: valueA = a.room; valueB = b.room; break;
                    case 2: valueA = a.floor; valueB = b.floor; break;
                    case 3: valueA = a.group; valueB = b.group; break;
                    case 4: valueA = a.course; valueB = b.course; break;
                    case 5: valueA = a.phone; valueB = b.phone; break;
                    default: return 0;
                }

                if (valueA < valueB) return currentSort.direction === 'asc' ? -1 : 1;
                if (valueA > valueB) return currentSort.direction === 'asc' ? 1 : -1;
                return 0;
            });

            renderTable();
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
        function renderTable() {
            const tbody = document.getElementById('studentsTableBody');
            tbody.innerHTML = '';

            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageStudents = filteredStudents.slice(start, end);

            pageStudents.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${student.fullName}</td>
                    <td class="room-cell">${student.room}</td>
                    <td>${student.floor}</td>
                    <td>${student.group}</td>
                    <td>${student.course}</td>
                    <td>${student.phone || '–Ω–µ —É–∫–∞–∑–∞–Ω'}</td>
                    <td class="actions">
                        <button class="btn btn-primary btn-sm" onclick="editStudent('${student.fullName}')">
                            ‚úèÔ∏è
                        </button>
                        <button class="btn btn-secondary btn-sm" onclick="deleteStudent('${student.fullName}')">
                            üóëÔ∏è
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
        function updatePagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';

            const totalPages = Math.ceil(filteredStudents.length / itemsPerPage);
            
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
                pageBtn.textContent = i;
                pageBtn.onclick = () => {
                    currentPage = i;
                    renderTable();
                    updatePagination();
                };
                pagination.appendChild(pageBtn);
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π
        function editStudent(fullName) {
            alert(`–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞: ${fullName}\n(–≠—Ç–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏)`);
        }

        function deleteStudent(fullName) {
            if (confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ ${fullName}?`)) {
                alert(`–°—Ç—É–¥–µ–Ω—Ç ${fullName} —É–¥–∞–ª–µ–Ω! (–í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)`);
            }
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>