<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ—á–µ—Ä–Ω—è—è –æ—Ç–º–µ—Ç–∫–∞ - –î–∏—Å–ø–µ—Ç—á–µ—Ä –û–±—â–µ–∂–∏—Ç–∏—è</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }
        body {
            background-color: #f0f2f5;
            color: #333;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .date-header {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 1.2rem;
            color: #7f8c8d;
        }
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        label {
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        select, input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        select:focus, input:focus {
            outline: none;
            border-color: #3498db;
        }
        .legend {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 0.5rem;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        .status-badge {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        .status-present { background: #27ae60; }  /* ‚úî */
        .status-statement { background: #3498db; } /* –ó */
        .status-poll { background: #f39c12; }    /* –û */
        .status-absent { background: #e74c3c; }  /* –• */
        .status-hospital { background: #9b59b6; } /* –ë */
        .status-none { background: #95a5a6; }    /* –ù–µ –æ—Ç–º–µ—á–µ–Ω */
        
        .attendance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .student-card {
            background: white;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s;
        }
        .student-card.present { border-color: #27ae60; background: #f0fff4; }
        .student-card.statement { border-color: #3498db; background: #ebf5fb; }
        .student-card.poll { border-color: #f39c12; background: #fef9e7; }
        .student-card.absent { border-color: #e74c3c; background: #fff0f0; }
        .student-card.hospital { border-color: #9b59b6; background: #f8f0ff; }
        
        .student-info {
            flex-grow: 1;
        }
        .student-name {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }
        .student-details {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        .status-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .status-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }
        .status-btn:hover {
            transform: scale(1.1);
        }
        .status-btn.active {
            transform: scale(1.15);
            box-shadow: 0 0 0 2px currentColor;
        }
        .stats {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1rem;
            text-align: center;
        }
        .stat-item {
            padding: 0.5rem;
        }
        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .stat-present { color: #27ae60; }
        .stat-statement { color: #3498db; }
        .stat-poll { color: #f39c12; }
        .stat-absent { color: #e74c3c; }
        .stat-hospital { color: #9b59b6; }
        .stat-total { color: #2c3e50; }
        
        .actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn-primary {
            background-color: #27ae60;
            color: white;
        }
        .btn-primary:hover {
            background-color: #219653;
        }
        .btn-secondary {
            background-color: #3498db;
            color: white;
        }
        .btn-secondary:hover {
            background-color: #2980b9;
        }
        .btn-reset {
            background-color: #e74c3c;
            color: white;
        }
        .btn-reset:hover {
            background-color: #c0392b;
        }
        .floor-title {
            text-align: center;
            margin: 2rem 0 1rem 0;
            padding: 1rem;
            background: #2c3e50;
            color: white;
            border-radius: 6px;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úÖ –í–µ—á–µ—Ä–Ω—è—è –æ—Ç–º–µ—Ç–∫–∞</h1>
        
        <div class="date-header">
            –î–∞—Ç–∞: <span id="currentDate"></span>
        </div>

        <div class="controls">
            <div class="form-group">
                <label>–í—ã–±–µ—Ä–∏—Ç–µ —ç—Ç–∞–∂</label>
                <select id="floorSelect" onchange="loadFloorStudents()">
                    <option value="">–í—Å–µ —ç—Ç–∞–∂–∏</option>
                    <option value="2">2 —ç—Ç–∞–∂</option>
                    <option value="3">3 —ç—Ç–∞–∂</option>
                    <option value="5">5 —ç—Ç–∞–∂</option>
                </select>
            </div>
            <div class="form-group">
                <label>–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∫—Ü–∏—é</label>
                <select id="sectionSelect" onchange="loadFloorStudents()">
                    <option value="">–í—Å–µ —Å–µ–∫—Ü–∏–∏</option>
                    <option value="–ê">–°–µ–∫—Ü–∏—è –ê</option>
                    <option value="–ë">–°–µ–∫—Ü–∏—è –ë</option>
                </select>
            </div>
            <div class="form-group">
                <label>–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫</label>
                <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏..." oninput="filterStudents()">
            </div>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="status-badge status-present">‚úî</div>
                <span>–ù–∞ –º–µ—Å—Ç–µ, –≥–æ—Ç–æ–≤ –∫–æ —Å–Ω—É</span>
            </div>
            <div class="legend-item">
                <div class="status-badge status-statement">–ó</div>
                <span>–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ –∑–∞—è–≤–ª–µ–Ω–∏—é</span>
            </div>
            <div class="legend-item">
                <div class="status-badge status-poll">–û</div>
                <span>–ù–∞ –æ–ø—Ä–æ—Å–µ</span>
            </div>
            <div class="legend-item">
                <div class="status-badge status-absent">–•</div>
                <span>–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø—Ä–∏—á–∏–Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞</span>
            </div>
            <div class="legend-item">
                <div class="status-badge status-hospital">–ë</div>
                <span>–ë–æ–ª—å–Ω–∏—á–Ω—ã–π, –±–æ–ª–µ–µ—Ç –≤ –±–æ–ª—å–Ω–∏—Ü–µ</span>
            </div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number stat-total" id="totalStudents">0</div>
                <div>–í—Å–µ–≥–æ</div>
            </div>
            <div class="stat-item">
                <div class="stat-number stat-present" id="presentStudents">0</div>
                <div>‚úî –ù–∞ –º–µ—Å—Ç–µ</div>
            </div>
            <div class="stat-item">
                <div class="stat-number stat-statement" id="statementStudents">0</div>
                <div>–ó –ó–∞—è–≤–ª–µ–Ω–∏–µ</div>
            </div>
            <div class="stat-item">
                <div class="stat-number stat-poll" id="pollStudents">0</div>
                <div>–û –û–ø—Ä–æ—Å</div>
            </div>
            <div class="stat-item">
                <div class="stat-number stat-absent" id="absentStudents">0</div>
                <div>–• –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</div>
            </div>
            <div class="stat-item">
                <div class="stat-number stat-hospital" id="hospitalStudents">0</div>
                <div>–ë –ë–æ–ª—å–Ω–∏—á–Ω—ã–π</div>
            </div>
        </div>

        <div id="attendanceContainer">
            <!-- –°—é–¥–∞ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å—Ç—É–¥–µ–Ω—Ç—ã –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç—Ç–∞–∂–∞ -->
        </div>

        <div class="actions">
            <button class="btn btn-primary" onclick="saveAttendance()">
                üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–º–µ—Ç–∫—É
            </button>
            <button class="btn btn-secondary" onclick="markAllPresent()">
                ‚úÖ –í—Å–µ –Ω–∞ –º–µ—Å—Ç–µ
            </button>
            <button class="btn btn-reset" onclick="resetAttendance()">
                üîÑ –°–±—Ä–æ—Å–∏—Ç—å —ç—Ç–∞–∂
            </button>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å—Ç–∞—Ç—É—Å–æ–≤
        const STATUS = {
            NONE: 'none',
            PRESENT: 'present',      // ‚úî
            STATEMENT: 'statement',  // –ó
            POLL: 'poll',            // –û
            ABSENT: 'absent',        // –•
            HOSPITAL: 'hospital'     // –ë
        };

        const STATUS_SYMBOLS = {
            [STATUS.PRESENT]: '‚úî',
            [STATUS.STATEMENT]: '–ó',
            [STATUS.POLL]: '–û',
            [STATUS.ABSENT]: '–•',
            [STATUS.HOSPITAL]: '–ë',
            [STATUS.NONE]: '?'
        };

        const STATUS_NAMES = {
            [STATUS.PRESENT]: '–ù–∞ –º–µ—Å—Ç–µ, –≥–æ—Ç–æ–≤ –∫–æ —Å–Ω—É',
            [STATUS.STATEMENT]: '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ –∑–∞—è–≤–ª–µ–Ω–∏—é',
            [STATUS.POLL]: '–ù–∞ –æ–ø—Ä–æ—Å–µ',
            [STATUS.ABSENT]: '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø—Ä–∏—á–∏–Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞',
            [STATUS.HOSPITAL]: '–ë–æ–ª—å–Ω–∏—á–Ω—ã–π, –±–æ–ª–µ–µ—Ç –≤ –±–æ–ª—å–Ω–∏—Ü–µ',
            [STATUS.NONE]: '–ù–µ –æ—Ç–º–µ—á–µ–Ω'
        };

        // –î–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
        const allStudents = [
  {id: 1, fullName: "–ö—É–¥—Ä—è–≤—Ü–µ–≤–∞ –ï –í25", room: "201–ê", floor: "2", group: "–í25", status: STATUS.NONE},
  {id: 2, fullName: "–ó–∞–π—Ü–µ–≤–∞ –í –ü14", room: "201–ê", floor: "2", group: "–ü14", status: STATUS.NONE},
  {id: 3, fullName: "–ë–∞–¥–∏–∫–æ–≤–∞ –† –ö14", room: "201–ê", floor: "2", group: "–ö14", status: STATUS.NONE},
  {id: 4, fullName: "–ü–µ—á–µ–Ω—Ü–æ–≤–∞ –°", room: "201–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 5, fullName: "–õ—é—á–∏–Ω—à–∞", room: "201–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 6, fullName: "–ë–∏—á–∏–Ω–æ–≤–∞ –õ", room: "201–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 7, fullName: "–¢–µ–Ω–≥–µ—Ä–µ–∫–æ–≤–∞", room: "201–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 8, fullName: "–ë–µ—Ä–≥–µ—Ä –Æ", room: "202–ê", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 9, fullName: "–ï–≤—Å—Ç—Ä–∞—Ç–æ–≤–∞ –í –ö13", room: "202–ê", floor: "2", group: "–ö13", status: STATUS.NONE},
  {id: 10, fullName: "–°—ã—Ä–µ–Ω–∫–æ –ê –ö12", room: "202–ë", floor: "2", group: "–ö12", status: STATUS.NONE},
  {id: 11, fullName: "–¢–µ—Ç—É—à–∫–∏–Ω–∞ –ê –ö12", room: "202–ë", floor: "2", group: "–ö12", status: STATUS.NONE},
  {id: 12, fullName: "–ö–∏—Å–µ–ª–µ–≤–∞ –° –ö12", room: "202–ë", floor: "2", group: "–ö12", status: STATUS.NONE},
  {id: 13, fullName: "–ü–µ—Ä–µ–ø–µ–ª–∏—Ü–∏–Ω–∞ –ê –ö12", room: "202–ë", floor: "2", group: "–ö12", status: STATUS.NONE},
  {id: 14, fullName: "–ö—Ä–∏–≤–æ—â–µ–∫–æ–≤–∞ –¢ –¢313", room: "203–ê1", floor: "2", group: "–¢313", status: STATUS.NONE},
  {id: 15, fullName: "–ë–µ–∫—Ç–∏—Ä–æ–≤–∞ –¢314", room: "203–ê1", floor: "2", group: "–¢314", status: STATUS.NONE},
  {id: 16, fullName: "–ö–æ—Å–ø–æ–∫–æ–≤–∞ –≠", room: "203–ê2", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 17, fullName: "–®—É–±–∏–Ω–∞", room: "203–ê2", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 18, fullName: "–ú–∞–º–∞—à–µ–≤–∞", room: "203–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 19, fullName: "–ú–∞–ª—å–∫–æ–≤–∞", room: "203–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 20, fullName: "–ì–æ–ª–æ–≤–∞", room: "203–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 21, fullName: "–ù–µ–¥–æ–±–µ–∂–∫–∏–Ω–∞", room: "211–ê", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 22, fullName: "–¢–æ–ª—Å—Ç–æ–≤–∞", room: "211–ê", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 23, fullName: "–û–¥–∏–Ω–∞–º–∞–º–∞–¥–æ–≤–∞", room: "211–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 24, fullName: "–î–æ–Ω–≥–∞–∫", room: "211–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 25, fullName: "–ß–µ—Å–Ω–æ–∫–æ–≤–∞", room: "211–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 26, fullName: "–î–∏–ª–µ–∫–æ–≤", room: "215–ê", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 27, fullName: "–î–∂—É–º–∞–∂–∞–Ω–æ–≤", room: "215–ê", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 28, fullName: "–ö–æ–∫–ø–∞—à–µ–≤", room: "215–ê", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 29, fullName: "–ú–∞—Ö–æ–º–µ—Ç–∞", room: "215–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 30, fullName: "–£–ª–∞–≥–∞—à–µ–≤", room: "215–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 31, fullName: "–ö—Ä–µ—á–µ—Ç–æ–≤", room: "215–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 32, fullName: "–°–∞–º–∏–µ–≤", room: "215–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 33, fullName: "–ö–∞—Ä–ø–æ–≤", room: "220–ê", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 34, fullName: "–ö–∏—Ä–∏–ª–ª–æ–≤", room: "220–ê", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 35, fullName: "–õ–æ—à–∞–∫–æ–≤", room: "220–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 36, fullName: "–°–∞–±–ª–∞–∫–æ–≤", room: "220–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 37, fullName: "–ò—Ä–∫–∏—Ç–æ–≤", room: "220–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 38, fullName: "–°–∞–º–∞–µ–≤", room: "220–ë", floor: "2", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 39, fullName: "–°—ã—Ä—ã—Ö !!!", room: "301–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 40, fullName: "–®—É–ª—å–≥–∏–Ω", room: "301–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 41, fullName: "–ú–∞—Ç–∏–Ω", room: "301–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 42, fullName: "–ö—É–∫–ø–µ–Ω–µ–∫–æ–≤", room: "301–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 43, fullName: "–ë–µ–¥—é—Ä–æ–≤", room: "301–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 44, fullName: "–ê–ª—å—á–∏–Ω", room: "302–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 45, fullName: "–ë—É–ª–±–∞–Ω–æ–≤", room: "302–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 46, fullName: "–ê–ª—å—á–∏–Ω", room: "302–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 47, fullName: "–ë–∞—Ö—Ç—É—à–∫–∏–Ω", room: "302–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 48, fullName: "–Æ–Ω—Ö—É–Ω–æ–≤", room: "302–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 49, fullName: "–§–∏–ª–∏–º–æ–Ω–æ–≤ !!!", room: "302–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 50, fullName: "–°–µ—Ä–≥–µ–µ–≤–∞ (–∫–æ—à)", room: "303–ê1", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 51, fullName: "–ë–µ—Ä–µ–∑–∏–∫–æ–≤–∞", room: "303–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 52, fullName: "–ü–æ–ø–æ—à–µ–≤–∞", room: "303–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 53, fullName: "–ê–Ω—Ç–æ–Ω–æ–≤–∞", room: "303–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 54, fullName: "–ó–∞–±–µ–ª—å–Ω–∏–∫–æ–≤–∞", room: "303–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 55, fullName: "–ï—Ä–µ–º–µ–µ–≤", room: "304–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 56, fullName: "–°–∞–∫—Å–∞–µ–≤ !!!", room: "304–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 57, fullName: "–ö–æ—Ä–Ω–∏–ª–æ–≤", room: "304–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 58, fullName: "–ü–ª–µ—Ç–Ω–µ–≤", room: "304–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 59, fullName: "–ö—É–ª—å–∑–µ–Ω–æ–≤", room: "304–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 60, fullName: "–°—ã—Ä—ã—Ö", room: "305–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 61, fullName: "–°–∫–æ—Ä–æ—Ö–æ–¥–æ–≤", room: "305–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 62, fullName: "–ú–∞–∫—Å–∏–º–æ–≤", room: "305–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 63, fullName: "–£–≥–Ω–∏—á–µ–≤", room: "305–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 64, fullName: "–ë–∞–±–∞–µ–≤", room: "305–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 65, fullName: "–ú–∞–∂–æ", room: "307–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 66, fullName: "–û–¥–æ–Ω–æ–≤–∞", room: "307–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 67, fullName: "–ì—É–º–∞—Ä–æ–≤–∞", room: "307–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 68, fullName: "–î–æ—Ä–∂—É", room: "307–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 69, fullName: "–ë–∏—Ç—É–≥–∞–Ω–æ–≤–∞", room: "307–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 70, fullName: "–ï–º–∏–ª—å—è–Ω–æ–≤–∞", room: "307–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 71, fullName: "–î–º–∏—Ç—Ä–∏–µ–≤–∞", room: "308–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 72, fullName: "–ü–æ—Ç–∫–∏–Ω–∞", room: "308–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 73, fullName: "–í—å—é–Ω–µ–Ω–∫–æ", room: "308–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 74, fullName: "–¢–æ–∫–º–∞—à–æ–≤–∞", room: "308–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 75, fullName: "–°–∞–≤—á–µ–Ω–∫–æ", room: "308–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 76, fullName: "–°–æ–ª–æ–≤—å–µ–≤–∞", room: "308–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 77, fullName: "–ê–¥—ã–∫–∞–µ–≤–∞", room: "308–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 78, fullName: "–ü—É—à–∫–∏–Ω–∞", room: "309–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 79, fullName: "–°–µ—Ä–≥–µ–µ–≤–Ω–∞", room: "309–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 80, fullName: "–†–æ–º–∞–Ω–æ–≤–∞ !!!", room: "309–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 81, fullName: "–ú–∞–≥–æ–º–æ–¥–æ–≤–∞ !!!", room: "309–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 82, fullName: "–ê–∫—É–ª–æ–≤–∞ !!!", room: "309–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 83, fullName: "–ê—Ñ–∞–Ω–∞—Å—å–µ–≤–∞", room: "309–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 84, fullName: "–ú–µ–¥–≤–µ–¥–µ–≤–∞", room: "310–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 85, fullName: "–ö–∞—Ä–∞—Å–æ–≤–∞", room: "310–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 86, fullName: "–ß–µ—Ä–µ–ø–∞–Ω–æ–≤–∞", room: "310–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 87, fullName: "–ö–æ–Ω–¥—ã–∫–æ–≤–∞", room: "310–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 88, fullName: "–Ø–∫–∏–º—á–µ–Ω–∫–æ", room: "310–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 89, fullName: "–®–∞–¥—Ä–∏–Ω–∞", room: "310–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 90, fullName: "–ê–∫—á–∏–Ω–æ–≤", room: "311–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 91, fullName: "–Ø–∏–ª–≥–∞–∫–æ–≤", room: "311–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 92, fullName: "–ß–∏–≥–∂–∏—Ç", room: "311–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 93, fullName: "–û—á—É—Ä—Ç–æ–≤ !!!", room: "311–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 94, fullName: "–ö–∞–Ω–≥–∏–Ω–æ–≤", room: "311–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 95, fullName: "–Æ–Ω—Ö—É–Ω–æ–≤ –≠ !", room: "311–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 96, fullName: "–ê—Ä–±–∞–µ–≤", room: "312–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 97, fullName: "–Æ–Ω—Ö—É–Ω–æ–≤ –ò", room: "312–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 98, fullName: "–ö–µ–±–µ–∫–æ–≤", room: "312–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 99, fullName: "–ï–Ω—á–∏–Ω–æ–≤", room: "312–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 100, fullName: "–ß—É—á–∏–Ω", room: "312–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 101, fullName: "–ò—Ä–∫–∏—Ç–æ–≤", room: "312–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 102, fullName: "–ö—Ä–∞—á–Ω–∞–∫–æ–≤–∞", room: "313–ê1", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 103, fullName: "–ù–æ–≤–∏–∫–æ–≤–∞", room: "313–ê2", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 104, fullName: "–ê–Ω—á–∏–Ω–∞", room: "313–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 105, fullName: "–ö—ã–¥–∞—Ç–æ–≤–∞", room: "313–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 106, fullName: "–ö–∞–∑–∞–∫–æ–≤–∞", room: "313–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 107, fullName: "–î–µ–ª—Ç–æ–∫–æ–≤–∞", room: "313–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 108, fullName: "–§–µ–¥–æ—Ä–æ–≤", room: "314–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 109, fullName: "–°—É–±–±–æ—Ç–∏–Ω", room: "314–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 110, fullName: "–°–∞—Ñ—Ä–æ–Ω–æ–≤", room: "314–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 111, fullName: "–Ø–∂–∞–Ω–∫–∏–Ω", room: "314–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 112, fullName: "–¢–∞–¥—ã—à–µ–≤", room: "314–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 113, fullName: "–ë–µ–ª–µ–∫–æ–≤", room: "314–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 114, fullName: "–†–µ—à–µ—Ç–æ–≤", room: "314–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 115, fullName: "–ú–∞–π–º–∞–Ω–æ–≤", room: "315–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 116, fullName: "–£–π–≥—É–ª—É–∫–æ–≤", room: "315–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 117, fullName: "–ò—Ä–≥–∏—Ç", room: "315–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 118, fullName: "–°–µ–≥–µ—Ä—Ç–∫—ã—à–µ–≤", room: "315–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 119, fullName: "–ß–∏—Ä–∫–æ–≤", room: "315–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 120, fullName: "–õ–æ–±–∞–Ω–æ–≤", room: "315–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 121, fullName: "–¢–æ–ø—Ç—ã–≥–∏–Ω", room: "318–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 122, fullName: "–õ–µ–≤–∏–Ω", room: "318–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 123, fullName: "–ü–∞–Ω", room: "318–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 124, fullName: "–ú–∏—Ä–∫—É–ª–µ–µ–≤", room: "318–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 125, fullName: "–í–∞—Ö–∏–¥–æ–≤", room: "318–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 126, fullName: "–ö—É–∑—å–º–∏–Ω", room: "318–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 127, fullName: "–ú–∏—Ä—Ö–∞–Ω–æ–≤", room: "318–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 128, fullName: "–ñ—É–∫–æ–≤–∞", room: "320–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 129, fullName: "–°–µ–º–µ–Ω–¥–µ–µ–≤–∞", room: "320–ê", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 130, fullName: "–®—É—Å—Ç–∏–Ω—Å–∫–∞—è", room: "320–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 131, fullName: "–†–æ–∂–∫–æ–≤–∞", room: "320–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 132, fullName: "–ö–æ–∑–ª–æ–≤–∞", room: "320–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 133, fullName: "–°–æ—Ç–Ω–∏–∫–æ–≤–∞", room: "320–ë", floor: "3", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 134, fullName: "–ö–∞–Ω—ã—Å–æ–≤–∞", room: "513–ê1", floor: "5", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 135, fullName: "–ú–∞–ª—á–∏–Ω–æ–≤–∞", room: "513–ê1", floor: "5", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 136, fullName: "–ë–æ—á–∫–∞—Ä–µ–≤–∞", room: "513–ê2", floor: "5", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 137, fullName: "–ì–ª—É—à–∫–æ–≤–∞", room: "513–ê2", floor: "5", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 138, fullName: "–ë–æ–ª–æ–≥–æ–≤–∞", room: "513–ë", floor: "5", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
  {id: 139, fullName: "–ö—É—Ä–∞–≥–∞–Ω–æ–≤–∞", room: "513–ë", floor: "5", group: "–ù–µ —É–∫–∞–∑–∞–Ω–∞", status: STATUS.NONE},
        ];

        let currentStudents = [];
        const attendanceData = {};

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function initPage() {
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString('ru-RU', {
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
            const savedData = localStorage.getItem('attendanceData');
            if (savedData) {
                Object.assign(attendanceData, JSON.parse(savedData));
            }
            
            loadFloorStudents();
            updateStats();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç—Ç–∞–∂–∞
        function loadFloorStudents() {
            const floor = document.getElementById('floorSelect').value;
            const section = document.getElementById('sectionSelect').value;
            const searchText = document.getElementById('searchInput').value.toLowerCase();

            currentStudents = allStudents.filter(student => {
                const matchesFloor = !floor || student.floor === floor;
                const matchesSection = !section || true;
                const matchesSearch = !searchText || student.fullName.toLowerCase().includes(searchText);
                
                return matchesFloor && matchesSection && matchesSearch;
            });

            renderStudents();
            updateStats();
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
        function filterStudents() {
            loadFloorStudents();
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
        function renderStudents() {
            const container = document.getElementById('attendanceContainer');
            container.innerHTML = '';

            if (currentStudents.length === 0) {
                container.innerHTML = '<div style="text-align: center; padding: 2rem; color: #7f8c8d;">–°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }

            // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —ç—Ç–∞–∂–∞–º
            const groupedByFloor = {};
            currentStudents.forEach(student => {
                if (!groupedByFloor[student.floor]) {
                    groupedByFloor[student.floor] = [];
                }
                groupedByFloor[student.floor].push(student);
            });

            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —ç—Ç–∞–∂–µ–π
            const floors = Object.keys(groupedByFloor).sort();

            floors.forEach(floor => {
                const floorTitle = document.createElement('div');
                floorTitle.className = 'floor-title';
                floorTitle.textContent = `–≠—Ç–∞–∂ ${floor}`;
                container.appendChild(floorTitle);

                const grid = document.createElement('div');
                grid.className = 'attendance-grid';

                groupedByFloor[floor].forEach(student => {
                    const status = attendanceData[student.id] || STATUS.NONE;
                    const card = document.createElement('div');
                    card.className = `student-card ${status}`;
                    card.innerHTML = `
                        <div class="student-info">
                            <div class="student-name">${student.fullName}</div>
                            <div class="student-details">–ö–æ–º–Ω–∞—Ç–∞: ${student.room} | –ì—Ä—É–ø–ø–∞: ${student.group}</div>
                            <div class="student-status" style="font-size: 0.8rem; color: #666; margin-top: 0.25rem;">
                                ${STATUS_NAMES[status]}
                            </div>
                        </div>
                        <div class="status-buttons">
                            <button class="status-btn status-present ${status === STATUS.PRESENT ? 'active' : ''}" 
                                onclick="setStatus(${student.id}, '${STATUS.PRESENT}')" title="–ù–∞ –º–µ—Å—Ç–µ, –≥–æ—Ç–æ–≤ –∫–æ —Å–Ω—É">‚úî</button>
                            <button class="status-btn status-statement ${status === STATUS.STATEMENT ? 'active' : ''}" 
                                onclick="setStatus(${student.id}, '${STATUS.STATEMENT}')" title="–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ –∑–∞—è–≤–ª–µ–Ω–∏—é">–ó</button>
                            <button class="status-btn status-poll ${status === STATUS.POLL ? 'active' : ''}" 
                                onclick="setStatus(${student.id}, '${STATUS.POLL}')" title="–ù–∞ –æ–ø—Ä–æ—Å–µ">–û</button>
                            <button class="status-btn status-absent ${status === STATUS.ABSENT ? 'active' : ''}" 
                                onclick="setStatus(${student.id}, '${STATUS.ABSENT}')" title="–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø—Ä–∏—á–∏–Ω–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞">–•</button>
                            <button class="status-btn status-hospital ${status === STATUS.HOSPITAL ? 'active' : ''}" 
                                onclick="setStatus(${student.id}, '${STATUS.HOSPITAL}')" title="–ë–æ–ª—å–Ω–∏—á–Ω—ã–π, –±–æ–ª–µ–µ—Ç –≤ –±–æ–ª—å–Ω–∏—Ü–µ">–ë</button>
                        </div>
                    `;
                    grid.appendChild(card);
                });

                container.appendChild(grid);
            });
        }

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
        function setStatus(studentId, status) {
            attendanceData[studentId] = status;
            localStorage.setItem('attendanceData', JSON.stringify(attendanceData));
            updateStats();
            renderStudents();
        }

        // –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ—Ö –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º–∏
        function markAllPresent() {
            if (confirm('–û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ —Ç–µ–∫—É—â–µ–º —ç—Ç–∞–∂–µ –∫–∞–∫ "–ù–∞ –º–µ—Å—Ç–µ"?')) {
                currentStudents.forEach(student => {
                    attendanceData[student.id] = STATUS.PRESENT;
                });
                localStorage.setItem('attendanceData', JSON.stringify(attendanceData));
                renderStudents();
                updateStats();
            }
        }

        // –°–±—Ä–æ—Å –æ—Ç–º–µ—Ç–æ–∫
        function resetAttendance() {
            if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –æ—Ç–º–µ—Ç–∫–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —ç—Ç–∞–∂–∞?')) {
                currentStudents.forEach(student => {
                    attendanceData[student.id] = STATUS.NONE;
                });
                localStorage.setItem('attendanceData', JSON.stringify(attendanceData));
                renderStudents();
                updateStats();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            const stats = {
                [STATUS.PRESENT]: 0,
                [STATUS.STATEMENT]: 0,
                [STATUS.POLL]: 0,
                [STATUS.ABSENT]: 0,
                [STATUS.HOSPITAL]: 0,
                [STATUS.NONE]: 0
            };

            currentStudents.forEach(student => {
                const status = attendanceData[student.id] || STATUS.NONE;
                stats[status]++;
            });

            document.getElementById('totalStudents').textContent = currentStudents.length;
            document.getElementById('presentStudents').textContent = stats[STATUS.PRESENT];
            document.getElementById('statementStudents').textContent = stats[STATUS.STATEMENT];
            document.getElementById('pollStudents').textContent = stats[STATUS.POLL];
            document.getElementById('absentStudents').textContent = stats[STATUS.ABSENT];
            document.getElementById('hospitalStudents').textContent = stats[STATUS.HOSPITAL];
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–º–µ—Ç–∫–∏
        function saveAttendance() {
            const presentCount = Object.values(attendanceData).filter(status => 
                status === STATUS.PRESENT || status === STATUS.POLL
            ).length;
            
            const absentCount = Object.values(attendanceData).filter(status => 
                status === STATUS.ABSENT
            ).length;

            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            const today = new Date().toLocaleDateString('ru-RU');
            alert(`‚úÖ –û—Ç–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!\n–î–∞—Ç–∞: ${today}\n–ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç: ${presentCount}\n–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç: ${absentCount}`);
            
            // –ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–∂
            const currentFloor = document.getElementById('floorSelect').value;
            if (currentFloor) {
                const nextFloor = parseInt(currentFloor) + 1;
                if (nextFloor <= 5) {
                    document.getElementById('floorSelect').value = nextFloor;
                    loadFloorStudents();
                }
            }
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>